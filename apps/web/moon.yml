language: 'typescript'
layer: 'application'
stack: 'frontend'

toolchains:
  default: 'bun'

dependsOn:
  - 'wasm-bridge'

tags:
  - 'react'
  - 'vite'

tasks:
  dev:
    command: 'bunx vite'
    preset: 'server'
  build:
    command: 'bunx vite build'
    inputs:
      - '@globs(sources)'
      - '@globs(configs)'
      - 'index.html'
    outputs:
      - 'dist/'
  preview:
    command: 'bunx vite preview'
    deps:
      - '~:build'
    preset: 'server'
  lint:
    command: 'bunx biome check --write'
    inputs:
      - '@globs(sources)'
      - '@globs(configs)'
  format:
    command: 'bunx biome format --write'
    inputs:
      - '@globs(sources)'
      - '@globs(configs)'
  e2e:
    command: 'bunx playwright test'
    inputs:
      - '@globs(sources)'
      - '@globs(configs)'
      - 'e2e/**/*'
      - 'playwright.config.ts'
